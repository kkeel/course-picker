/* =========================================================
   print-books.css
   ========================================================= */

@media print {

  @page {
    margin: 32mm 28mm 24mm 15mm;

    @bottom-left {
      content: "Alveary Book List";
      font-size: 8pt;
      color: #4b544b;
      white-space: nowrap;
    }

    @bottom-center {
      content: "©2026 Charlotte Mason Institute® All rights reserved.";
      font-size: 8pt;
      color: #4b544b;
      white-space: nowrap;
    }

    @bottom-right {
      content: "p." counter(page);
      font-size: 8pt;
      color: #4b544b;
      white-space: nowrap;
    }
  }
   
  /* ---------------------------------------------------------
     BOOK LIST: Resource cards print sizing (9pt everywhere)
     --------------------------------------------------------- */

  /* 1) Make the resource card base 9pt, then inherit everywhere */
  .resource-card {
    font-size: 9pt !important;
    line-height: 1.25 !important;
  }
  .resource-card * {
    font-size: inherit !important;
  }

  /* 2) Keep weights as-is (you asked to keep existing weights),
        but normalize line-heights a bit so things don’t feel cramped */
  .resource-title,
  .resource-subline,
  .resource-rationale,
  .resource-meta-text,
  .resource-bottom-title,
  .resource-bottom-head-text,
  .buy-links,
  .resource-prep-body {
    line-height: 1.25 !important;
  }

  /* 3) Make images smaller so they don’t dominate */
  .resource-img-wrap {
    width: 56px !important;
    height: 74px !important;
    flex: 0 0 56px !important;
  }
  .resource-img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }

  /* 4) Buttons/inputs: force 9pt text, and keep them slim */
  .buy-link-pill,
  .prep-options-btn,
  .prep-select,
  .prep-option-remove {
    font-size: 9pt !important;
    line-height: 1.1 !important;
  }

  /* If any of these had fixed heights, loosen them so 9pt fits cleanly */
  .buy-link-pill {
    height: auto !important;
    padding: 1px 6px !important;
  }
  .prep-select {
    height: auto !important;
    padding: 1px 4px !important;
  }

  /* 5) Tighten vertical spacing inside resource cards just a touch */
  .resource-subline { margin-top: 2px !important; }
  .resource-rationale { margin-top: 4px !important; }
  .resource-meta-label,
  .resource-bottom-title { margin-bottom: 2px !important; }

  /* 6) Avoid print splitting weirdly inside a resource card */
  .resource-card,
  .resource-bottom-strip,
  .resource-prep-body,
  .buy-links {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

   /* ===========================
   BOOK LIST — PRINT TWEAKS
   (add at END of @media print)
   =========================== */

/* 1) Resource titles to 10pt */
.resource-title,
.resource-title * ,
.resource-main-title,
.resource-main-title * {
  font-size: 10pt !important;
  line-height: 1.15 !important;
}

/* 4) Hide "+ resource to my booklist" buttons (all states) */
.bookmark-btn,
.bookmark-btn * {
  display: none !important;
} /* buttons are .bookmark-btn--solid/--ghost/--empty in books.html */ /* :contentReference[oaicite:2]{index=2} */

/* 6) Badges (optional / choose one / grade tags): white text, size 9 */
.resource-badge,
.badge,
.badge * ,
.resource-badge * {
  color: #fff !important;
  font-size: 9pt !important;
  line-height: 1.05 !important;
}

/* 7) Make images smaller */
.resource-img {
  width: 44px !important;
  height: auto !important;
}
.resource-img-wrap,
.resource-cover,
.resource-cover-wrap {
  width: 44px !important;
}

/* 3) Remove colored backgrounds + card outlines/shadows.
      Keep ONLY a single border under the purchase strip. */
.resource-card {
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  outline: none !important;
}
.resource-card * {
  box-shadow: none !important;
}

/* Keep only the bottom border under the purchase buttons strip.
   (We DO NOT set a new color; we let your current border color apply.) */
.resource-bottom-strip {
  border-left: none !important;
  border-right: none !important;
  border-top: none !important;
  border-bottom-width: 1px !important;
  border-bottom-style: solid !important;
}

/* 5) Purchase buttons => bold underlined hyperlink text, #596e5e */
.resource-buy-row a,
.resource-buy-row button,
.resource-buy-row .btn,
.resource-buy-row .btn-pill,
.resource-buy-row .buy-link-pill {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 10px 0 0 !important;
  border-radius: 0 !important;

  color: #596e5e !important;
  font-weight: 700 !important;
  text-decoration: underline !important;
  box-shadow: none !important;
}

/* If any purchase buttons are actually <a> wrapping pills */
.resource-buy-row a:link,
.resource-buy-row a:visited {
  color: #596e5e !important;
}

/* 2) Prep + Tracking:
   - Hide header (title/chevron/+Add) when there are NO prep lines
   - When there ARE prep lines: show TITLE + LINES only
   - No chevron, no +Add, no remove-X, no dropdown styling
*/

/* Always hide chevron toggle + "+ Add" controls in print */
.prep-collapse-btn { display: none !important; }               /* chevron */ /* :contentReference[oaicite:3]{index=3} */
.prep-options-add-row,
.prep-options-btn { display: none !important; }                /* + Add */   /* :contentReference[oaicite:4]{index=4} */
.prep-option-remove { display: none !important; }              /* ✕ */       /* :contentReference[oaicite:5]{index=5} */

/* Hide the whole prep header by default... */
.resource-bottom-head { display: none !important; }

/* ...but show it IF there is at least one prep line inside the body */
.resource-prep-body:has(.prep-option-row) ~ * {}
/* show the title row when options exist */
.resource-bottom-head:has(+ .resource-prep-body .prep-option-row) {
  display: flex !important;
}

/* Force the body OPEN in print (even if x-show closed it),
   but ONLY when there are prep rows (prevents empty sections printing) */
.resource-prep-body { display: none !important; }
.resource-prep-body:has(.prep-option-row) {
  display: block !important;
}

/* Make prep rows look like simple text lines (not dropdown chips) */
.prep-option-row {
  padding: 0 !important;
  margin: 2px 0 !important;
  gap: 6px !important;
}

/* De-dropdown the selects */
.prep-select {
  appearance: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  box-shadow: none !important;
  font-size: 9pt !important;
  line-height: 1.1 !important;
}

/* Make sure the prep title is present but compact (no chevron anyway) */
.resource-bottom-title {
  font-weight: 700 !important;
  font-size: 9pt !important;
  margin: 4px 0 2px !important;
}

/* 8) Tighten vertical + horizontal spacing a bit */
.resource-top-row,
.resource-info-row,
.resource-bottom-strip {
  padding-top: 4px !important;
  padding-bottom: 4px !important;
}
.resource-info-row {
  gap: 8px !important;
}
.resource-info-divider {
  margin: 4px 0 !important;
}
.resource-subline,
.resource-rationale,
.resource-tipbox {
  margin-top: 2px !important;
}
  
/* =========================================================
   PRINT TWEAKS (Jan 3): spacing, buy links as text, borders,
   image fit, and better page-break behavior
   ========================================================= */

  /* 1) Rationale: add a *little* space before notes/may-sub box */
  .resource-rationale{
    margin-bottom: 4px !important;
  }

  /* 2) Notes / "may sub" box: slightly less padding, but keep readable */
  .resource-tipbox{
    padding: 4px 6px !important;
    margin-top: 4px !important;   /* ensures separation from rationale */
  }

  /* 3) Remove background color from the purchase/options strip too */
  .resource-bottom-strip,
  .resource-bottom-inner,
  .resource-bottom-row,
  .resource-bottom-right,
  .resource-buy-links{
    background: transparent !important;
    box-shadow: none !important;
  }

  /* 4) Images: smaller AND crop-fill the box so they don’t look tall/narrow */
  img.resource-img{
    width: 34px !important;
    height: 48px !important;
    object-fit: cover !important;
    object-position: center !important;
    display: block !important;
  }

  /* If there’s any wrapper controlling the thumbnail area, force it to match */
  .resource-img-wrap,
  .resource-img-col,
  .resource-img-holder{
    width: 34px !important;
    height: 48px !important;
    overflow: hidden !important;
  }

  /* 5) Purchase option “buttons” -> bold underlined hyperlink text */
  .resource-buy-links a,
  .resource-buy-links .buy-link-pill,
  a.buy-link-pill{
    background: transparent !important;
    border: 0 !important;
    padding: 0 !important;
    margin: 0 10px 0 0 !important;
    border-radius: 0 !important;
    box-shadow: none !important;

    color: #596e5e !important;
    font-weight: 700 !important;
    text-decoration: underline !important;
    text-underline-offset: 2px !important;

    display: inline !important; /* prevents “pill” layout */
    line-height: 1.15 !important;
  }

  /* If your base CSS applies hover/focus styles that look button-like */
  .resource-buy-links a:hover,
  .resource-buy-links a:focus{
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
    outline: none !important;
  }

  /* 6) Make the top-of-resource and bottom-of-purchase-strip borders visible and a tad thicker */
  :root{
    --print-resource-rule: #adb58f; /* fallback if the existing var isn’t available */
  }

  /* Top rule (use what exists in your structure: resource-top-row is typically the visible “top” area) */
  .resource-top-row{
    border-top: 2px solid var(--resource-border-color, var(--print-resource-rule)) !important;
  }

  /* Bottom rule (bottom of purchase strip) */
  .resource-bottom-strip{
    border-bottom: 2px solid var(--resource-border-color, var(--print-resource-rule)) !important;
  }

  /* 7) Tighten space between image and title/rationale column */
  .resource-top-left{
    gap: 8px !important;   /* was larger; reduces horizontal whitespace */
  }
  .resource-top-row{
    padding-top: 6px !important;
    padding-bottom: 6px !important;
  }

  /* Also tighten the internal text block spacing a touch */
  .resource-title{
    margin: 0 0 2px 0 !important;
  }
  .resource-meta,
  .resource-submeta{
    margin-top: 1px !important;
  }

  /* 8) Keep the topic header + first resource together whenever possible
        (avoid a page break immediately after the topic header block) */
  .topic-card{
    break-after: avoid-page !important;
    page-break-after: avoid !important;
  }

  /* And ensure resource blocks themselves don’t split internally (paged-friendly) */
  .resource-top-row,
  .resource-bottom-strip{
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

   /* ===========================
   FINAL OVERRIDES (Jan 3)
   =========================== */

/* 1) RATIONALE spacing:
   remove top space, add bottom space (between rationale and tipbox) */
.resource-rationale{
  margin-top: 0 !important;       /* kills the earlier margin-top:4px */
  margin-bottom: 5px !important;  /* creates the desired separation below */
}

/* tipbox: keep a small top gap but not too much */
.resource-tipbox{
  margin-top: 0 !important;       /* rely on rationale bottom spacing instead */
  padding: 3px 5px !important;    /* slightly less padding than current 4px 6px */
}

/* 2) Remove BOTTOM border of purchase options strip (too busy) */
.resource-bottom-strip{
  border-bottom: none !important; /* overrides earlier border-bottom:2px */
}

/* Keep ONLY the TOP rule on the resource (you liked that) */
.resource-top-row{
  border-top-width: 2px !important;   /* keep thickness */
  border-top-style: solid !important;
}

/* 3) Tighten space between image and info more */
.resource-top-left{
  gap: 5px !important; /* was 8px */
}

/* If the right text column has its own padding/margin, tighten it too */
.resource-info-right{
  margin-left: 0 !important;
  padding-left: 0 !important;
}

/* 4) Image: a tad shorter, width stays the same */
img.resource-img{
  width: 34px !important;
  height: 44px !important;      /* was 48px */
  object-fit: cover !important;
}

/* Keep wrapper in sync so we don’t get extra empty space */
.resource-img-wrap,
.resource-img-col,
.resource-img-holder{
  width: 34px !important;
  height: 44px !important;
}

/* Print: purchase options now render in the TOP ROW (FULL view),
   so hide the bottom-strip purchase section to avoid duplicates */
.resource-bottom-buy {
  display: none !important;
}
   
}

@media print{
  /* Print should match desktop placement */
  .purchase-block--top{ display: block !important; }
  .purchase-block--bottom{ display: none !important; }

  /* Print-friendly purchase links */
  .buy-link-pill{
    background: none !important;
    border: none !important;
    padding: 0 !important;
    height: auto !important;
    border-radius: 0 !important;

    font-weight: 700 !important;
    text-decoration: underline !important;
    color: #596e5e !important;

    display: inline !important;
    white-space: nowrap !important;
  }

  .resource-buy-links{
    gap: 10px !important;
    flex-wrap: wrap !important; /* allows wrapping in print if needed */
  }
}

@media print {

  /* Pull Resource Prep into the main text flow */
  .resource-bottom-strip {
    margin-top: 4px !important;
    padding-top: 0 !important;
  }

  /* Kill footer-like spacing */
  .resource-bottom-inner,
  .resource-bottom-row {
    padding-top: 0 !important;
    margin-top: 0 !important;
  }

  /* Tighten the gap after notes / alt formats box */
  .resource-tipbox {
    margin-bottom: 4px !important;
  }

  /* Prep title should feel like a continuation, not a new section */
  .resource-bottom-title {
    margin-top: 2px !important;
  }

}

@media print {

  /* Authoritative print thumbnail size */
  .resource-img-wrap,
  .resource-img-col,
  .resource-img-holder {
    width: 34px !important;
    height: 44px !important;
    overflow: hidden !important;
    background: transparent !important;
  }

  img.resource-img {
    width: 34px !important;
    height: 44px !important;
    object-fit: cover !important;
    display: block !important;
  }

}

@media print {

  /* Tighten image → text spacing */
  .resource-top-left {
    gap: 5px !important;
  }

  /* Remove any lingering indent on the text column */
  .resource-info-right {
    margin-left: 0 !important;
    padding-left: 0 !important;
  }

}

/* ===========================
   BOOK LIST — PRINT TIGHTENING (Jan 5)
   Add at VERY END of print-books (15).css
   =========================== */

/* A) Pull “Resource Preparation & Tracking” up tighter under the tipbox */
.resource-bottom-strip{
  margin-top: 4px !important;        /* was 10px */
  padding-top: 6px !important;       /* was 10px */
  padding-bottom: 6px !important;    /* was 10px */
  margin-bottom: 0 !important;       /* stop the weird extra space/overlap in print */
}

/* Also reduce internal grid gap inside the bottom strip */
.resource-bottom-row{
  gap: 6px !important;              /* was 15px */
}

/* B) Tighten horizontal space between cover image and text column */
.resource-top-left{
  gap: 4px !important;               /* you had 5px; go a touch tighter */
}

/* C) Fix “grey space” under images in print by forcing wrapper + img to match */
.resource-img-wrap,
.resource-cover,
.resource-cover-wrap{
  height: auto !important;           /* overrides any fixed height from screen styles */
  min-height: 0 !important;
  background: transparent !important;
  padding: 0 !important;
  overflow: hidden !important;
}

.resource-img{
  display: block !important;
  height: auto !important;
  object-fit: cover !important;
}

/* D) Remove “reserved” blank space at the bottom of cards in print */
.resource-card{
  padding-bottom: 0 !important;
  margin-bottom: 8px !important;     /* small consistent separation between cards */
}

/* E) If a tipbox exists but is truly empty, don’t print it */
.resource-tipbox:empty{
  display: none !important;
  margin: 0 !important;
  padding: 0 !important;
  border: 0 !important;
}

/* =========================================================
   BOOK LIST — PRINT HARD OVERRIDES (Jan 5)
   Put at the VERY END of print-books (16).css
   ========================================================= */

@media print {

  /* 1) Absolutely kill the “reserved” prep area when there are NO real prep rows */
  .resource-bottom-strip { 
    margin: 0 !important;
  }

  /* Hide the entire prep strip unless it contains at least one .prep-option-row */
  .resource-bottom-strip { display: none !important; }
  .resource-bottom-strip:has(.resource-prep-body .prep-option-row) {
    display: block !important;
    margin-top: 4px !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Tighten the title + first line spacing when it *does* print */
  .resource-bottom-title { margin: 2px 0 2px !important; }
  .resource-prep-body { margin: 0 !important; padding: 0 !important; }

  /* 2) Image wrapper + image MUST match exactly (prevents grey “tail” under covers) */
  .resource-img-wrap,
  .resource-cover,
  .resource-cover-wrap,
  .resource-img-col,
  .resource-img-holder {
    width: 34px !important;
    height: 44px !important;
    padding: 0 !important;
    margin: 0 !important;
    background: transparent !important;
    overflow: hidden !important;
    line-height: 0 !important;  /* prevents inline-image baseline gaps */
  }

  img.resource-img,
  .resource-img {
    width: 34px !important;
    height: 44px !important;
    display: block !important;
    object-fit: cover !important;
    object-position: center !important;
    margin: 0 !important;
  }

  /* 3) The “gap” is not just gap — clamp all likely offenders */
  .resource-top-left {
    gap: 4px !important;
    column-gap: 4px !important;
  }
  .resource-media,
  .resource-img-col {
    padding-right: 0 !important;
    margin-right: 0 !important;
  }
  .resource-info-right {
    margin-left: 0 !important;
    padding-left: 0 !important;
  }
}

/* =========================================================
   BOOK LIST — PRINT: AUTHORITATIVE TIGHTENING (put LAST)
   ========================================================= */
@media print {

  /* --- 0) Stop “rules fighting”: zero out bottom spacing on the big wrappers --- */
  .resource-body,
  .resource-top-row,
  .resource-top-left,
  .resource-top-right,
  .resource-info-row,
  .resource-info-left,
  .resource-info-right {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Keep the note/alt-formats box tight to whatever follows */
  .resource-tipbox {
    margin-bottom: 2px !important;
  }

  /* --- 1) Remove ALL reserved prep space unless there is a real prep row --- */
  .resource-bottom-strip {
    display: none !important;     /* default: no prep area at all */
    margin: 0 !important;
    padding: 0 !important;
  }

  /* If there’s at least one prep line, show it and keep it snug */
  .resource-bottom-strip:has(.resource-prep-body .prep-option-row) {
    display: block !important;
    margin-top: 2px !important;   /* was visually much larger */
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Ensure the prep body only contributes height when it has rows */
  .resource-prep-body { display: none !important; }
  .resource-prep-body:has(.prep-option-row) {
    display: block !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* --- 2) Tighten image → text spacing (multiple wrappers can add space) --- */
  .resource-top-left {
    gap: 4px !important;
    column-gap: 4px !important;
  }

  .resource-media,
  .resource-img-col {
    margin: 0 !important;
    padding: 0 !important;
  }

  .resource-img-wrap,
  .resource-img-holder {
    margin: 0 !important;
    padding: 0 !important;
    line-height: 0 !important; /* prevents baseline “tail” gaps */
  }

  /* --- 3) If you still see bottom “dead space” between cards, clamp card spacing --- */
  .resource-card {
    padding-bottom: 0 !important;
    margin-bottom: 0px !important;
  }
}
